{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Lesson Overview v13 - Final",
  "description": "Final schema for concept and re-engagement lesson overview files, aligned with engineer-provided valid samples.",
  "type": "object",
  "properties": {
    "overview_type": {
      "description": "The type of lesson.",
      "type": "string",
      "enum": ["concept", "re-engagement"]
    },
    "overview_pacing": {
      "description": "Overall pacing for the entire lesson.",
      "type": "object",
      "properties": {
        "pacing_type": { "type": "string", "enum": ["minutes"], "default": "minutes" },
        "pacing_amount": { "type": "integer" }
      },
      "required": ["pacing_amount"]
    },
    "overview_labels": {
      "description": "Display labels for the lesson header.",
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "overview_label_type": { "type": "string", "enum": ["session"], "default": "session" },
          "overview_label_prefix": { "type": "string" },
          "overview_label_title": { "type": "string" }
        },
        "required": ["overview_label_title"]
      }
    },
    "overview_metadata": {
      "description": "Core descriptive information about the lesson.",
      "type": "object",
      "properties": {
        "overview_number": { "type": "integer" },
        "overview_title": { "type": "string" },
        "overview_subtitle": { "type": "string" },
        "overview_description": { "type": "string" }
      },
      "required": ["overview_number", "overview_title", "overview_description"]
    },
    "overview_items": {
      "description": "An array of content blocks to be displayed in tabs.",
      "type": "array",
      "items": {
        "$ref": "#/definitions/overviewItem"
      }
    }
  },
  "required": ["overview_type", "overview_pacing", "overview_metadata", "overview_items"],
  "definitions": {
    "overviewItem": {
      "type": "object",
      "properties": {
        "overview_item_type": {
          "type": "string",
          "enum": ["learning_goals", "big_ideas", "essential_ideas", "key_terms", "pacing_guide", "materials_needed"]
        },
        "overview_item_content_type": {
          "type": "string",
          "enum": ["html", "text"]
        },
        "overview_item_title": { "type": "string" },
        "overview_item_data": {
          "type": "object",
          "properties": {
            "overview_item_data_type": { "type": "string", "enum": ["list", "group_list", "session_list"] },
            "overview_item_data_items": {
              "type": "array",
              "items": {
                "anyOf": [
                  { "type": "string" },
                  { "$ref": "#/definitions/dataGroup" }
                ]
              }
            }
          },
          "required": ["overview_item_data_type", "overview_item_data_items"]
        }
      },
      "required": ["overview_item_type", "overview_item_title", "overview_item_data"]
    },
    "dataGroup": {
      "type": "object",
      "properties": {
        "overview_item_data_group_title": { "type": "string" },
        "overview_item_data_group_items": {
          "description": "Used for the final level of nesting, like a list of term strings or a list of activity objects.",
          "type": "array",
          "items": {
             "anyOf": [
                { "type": "string" },
                { "$ref": "#/definitions/pacingActivity" }
             ]
          }
        },
        "overview_item_data_groups": {
          "description": "Used for recursive nesting, like a Session containing a list of Blocks.",
          "type": "array",
          "items": { "$ref": "#/definitions/dataGroup" }
        }
      }
    },
    "pacingActivity": {
      "type": "object",
      "properties": {
        "overview_item_data_group_item_type": { "type": "string", "enum": ["book", "online", "presentation"] },
        "overview_item_data_group_item_prefix": { "type": "string" },
        "overview_item_data_group_item_title": { "type": "string" },
        "overview_item_data_group_item_description": { "type": "string" },
        "overview_item_data_group_item_pacing": {
          "type": "object",
          "properties": {
            "pacing_type": { "type": "string", "default": "minutes" },
            "pacing_amount": { "type": "integer" }
          },
          "required": ["pacing_amount"]
        }
      },
      "required": ["overview_item_data_group_item_type", "overview_item_data_group_item_title", "overview_item_data_group_item_description"]
    }
  }
}